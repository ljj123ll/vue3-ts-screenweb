<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<link rel="icon" type="image/svg+xml" href="/vite.svg" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Vite + Vue + TS</title>
	</head>
	<body>
		<div id="app"></div>
		<script type="module" src="/src/main.ts"></script>

		<script>
			!(function (x) {
				// 节流函数：控制函数在指定间隔内只执行一次
				function throttle(func, delay) {
					let lastExecTime = 0; // 上次执行时间
					return function (...args) {
						const now = Date.now();
						// 如果当前时间与上次执行时间的间隔大于设定延迟，则执行函数
						if (now - lastExecTime > delay) {
							func.apply(this, args);
							lastExecTime = now;
						}
					};
				}

				function w() {
					var v,
						u,
						t,
						tes,
						s = x.document,
						r = s.documentElement,
						a = document.children[0].clientWidth;
					if (a === 0) {
						a = x.innerWidth;
					}
					if (!v && !u) {
						var n = !!x.navigator.appVersion.match(/AppleWebKit.*Mobile.*/);
						v = x.devicePixelRatio;
						tes = x.devicePixelRatio;
						v = n ? v : 1;
						u = 1 / v;
					}
					if (!a || a <= 0) {
						return;
					}
					if (a > 980) {
						r.style.fontSize = '16px';
					} else if (a >= 375 && a <= 980) {
						r.style.fontSize = (a / 1920) * 32 + 'px';
					} else {
						r.style.fontSize = '6.25px';
					}
				}

				// 用节流函数包装w方法，设置100ms间隔（可根据需求调整）
				const throttledW = throttle(w, 100);
				
				// 为resize事件绑定节流后的方法
				x.addEventListener('resize', throttledW);
				
				// 初始化执行一次
				w();
			})(window);
		</script>
	</body>
</html>